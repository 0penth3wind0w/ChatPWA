<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Generate App Icons</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
    }
    button {
      background: #3D8A5A;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px 5px;
    }
    button:hover {
      background: #4D9B6A;
    }
    canvas {
      border: 1px solid #ddd;
      margin: 10px;
      border-radius: 8px;
    }
    .preview {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Generate ChatPWA Icons</h1>
  <p>Click the buttons below to generate and download PNG icons from the SVG:</p>

  <button onclick="generateIcon(192)">Generate 192x192 Icon</button>
  <button onclick="generateIcon(512)">Generate 512x512 Icon</button>

  <div class="preview">
    <div>
      <h3>192x192 Preview</h3>
      <canvas id="canvas192" width="192" height="192"></canvas>
    </div>
    <div>
      <h3>512x512 Preview</h3>
      <canvas id="canvas512" width="512" height="512"></canvas>
    </div>
  </div>

  <script>
    const svgContent = `<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="512" height="512" rx="110" fill="#3D8A5A"/>
  <path d="M256 128C176.471 128 112 182.981 112 250.667C112 286.4 126.933 318.827 151.467 343.36C148.8 364.8 138.667 389.333 138.667 389.333C138.667 389.333 177.6 384 202.667 368C217.6 372.8 233.6 375.467 250.667 375.467C330.196 375.467 394.667 320.485 394.667 252.8C394.667 185.115 330.196 128 256 128Z" fill="white"/>
  <circle cx="218" cy="250" r="16" fill="#3D8A5A"/>
  <circle cx="256" cy="250" r="16" fill="#3D8A5A"/>
  <circle cx="294" cy="250" r="16" fill="#3D8A5A"/>
</svg>`;

    function generateIcon(size) {
      const canvas = document.getElementById(`canvas${size}`);
      const ctx = canvas.getContext('2d');

      const img = new Image();
      const blob = new Blob([svgContent], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(blob);

      img.onload = function() {
        ctx.clearRect(0, 0, size, size);
        ctx.drawImage(img, 0, 0, size, size);

        // Download the canvas as PNG
        canvas.toBlob(function(blob) {
          const a = document.createElement('a');
          a.href = URL.createObjectURL(blob);
          a.download = `icon-${size}.png`;
          a.click();
        });

        URL.revokeObjectURL(url);
      };

      img.src = url;
    }

    // Auto-generate previews on load
    window.onload = function() {
      [192, 512].forEach(size => {
        const canvas = document.getElementById(`canvas${size}`);
        const ctx = canvas.getContext('2d');

        const img = new Image();
        const blob = new Blob([svgContent], { type: 'image/svg+xml' });
        const url = URL.createObjectURL(blob);

        img.onload = function() {
          ctx.drawImage(img, 0, 0, size, size);
          URL.revokeObjectURL(url);
        };

        img.src = url;
      });
    };
  </script>
</body>
</html>
